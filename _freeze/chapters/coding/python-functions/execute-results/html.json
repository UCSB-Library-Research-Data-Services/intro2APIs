{
  "hash": "4765fd2037556126404f4a77fc906455",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Helping Functions\"\nexecute:\n  echo: true\nformat:\n  html:\n    code-overflow: wrap\nlightbox: true\n---\n\n\n\nOne of the most useful features of programming languages is the ability to work with functions: reusable blocks of code that perform a specific task. In Python, functions are defined using the `def` keyword. They can take inputs (arguments) and return outputs (values).\n\nFor this exercise, weâ€™ll write a few small helper functions (to avoid repeating ourselves) and two main functions that query the DPLA API and return responses in a clean, â€œPythonicâ€ format.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n## You can treat these as â€œgivenâ€\nIf functions feel a little abstract right now, thatâ€™s completely fine. The main goal of the workshop is learning how to *work with an API* (queries, parameters, and results). You can copy/paste these functions and focus on how you use them.\n:::\n\n## Helper functions\n\nThese helper functions arenâ€™t strictly necessary, but they keep the rest of the notebook cleaner. You can copy/paste them into your notebook and come back to the details later:\n\n::: {#a2f2044a .cell execution_count=2}\n``` {.python .cell-code}\ndef _join_list(x, sep=\"; \", keep_first_only=False):\n    \"\"\"\n    Helper function to join a list of values into a single string. If the input is not a list, it will return the string representation of the input. If the input is None, it will return an empty string.\n    \"\"\"\n    if isinstance(x, list):\n        if keep_first_only and len(x) > 0:\n            return str(x[0])\n        return sep.join(str(v) for v in x if v is not None)\n    return \"\" if x is None else str(x)\n\ndef _top_n(d, n=10):\n    \"\"\"Helper function to return the top n items from a dictionary, sorted by value in descending order.\"\"\"\n    return dict(sorted(d.items(), key=lambda x: x[1], reverse=True)[:n])\n\ndef _redact_request_url(url):\n    \"\"\"Remove the api_key parameter from the URL for display purposes.\"\"\"\n    parsed_url = urlsplit(str(url))  # Convert httpx.URL to string\n    query_params = parse_qsl(parsed_url.query)\n    filtered_params = [(name, value) for name, value in query_params if name != \"api_key\"]\n    redacted_query = urlencode(filtered_params)\n    redacted_url = parsed_url._replace(query=redacted_query)\n    return urlunsplit(redacted_url)\n```\n:::\n\n\n## Main functions\n\nLetâ€™s take some time to understand our first main function. The goal is simple: make a DPLA request and get back a JSON response as a Python dictionary.\n\nIf we take a look at the [DPLA API documentation](https://pro.dp.la/developers/requests){target=\"_blank\"}, we can see that a request is built from a base URL (`https://api.dp.la/v2`), a resource type (`items` or `collections`), query parameters (e.g. `q=artificial+intelligence`), and your API key.\n\nAdditionally, you can request for specific facets (e.g. `facets=sourceResource.type`), specific fields to be returned (e.g. `fields=sourceResource.title,sourceResource.description`), and you can also specify the page number (e.g. `page=2`) and the number of results per page (e.g. `page_size=20`).\n\nIf we tried to handle all of that ad hoc every time, our notebook would get long and repetitive fast. Instead, weâ€™ll write one function that builds the request and sends it for us.\n\nOur function will be called `search_items`. It takes a `query`, a `resource_type` (usually `items`), and any additional DPLA parameters via `**parameters`.\n\nOur resulting function will return a dictionary from the JSON response.\n\n::: {#94695b17 .cell execution_count=3}\n``` {.python .cell-code}\ndef search_items(query, resource_type='items', verbose=False, timeout=30.0, **parameters):\n    \"\"\"\n    Search DPLA items with given query and parameters.\n    \n    Args:\n        query (str): The search query string. It's possible to use logical operators (AND, OR, NOT). Additionally, you can use wildcards (*) for partial matches.\n        resource_type (str): The type of resource to search for. Default is 'items'.\n        verbose (bool): If True, prints the request URL. Default is False.\n        timeout (float): The timeout for the HTTP request in seconds. Default is 30.0.\n        **parameters: Facets and filter parameters from the DPLA API documentation: https://pro.dp.la/developers/requests\n                    Dotted keywords and values can be passed using dictionary unpacking. For example, to filter by sourceResource.title, you can pass:\n                    **{\"sourceResource.title\": \"example title\"}\n    Returns:\n        dict: The JSON response from the DPLA API as a Python dictionary.\n    \"\"\"\n    \n    # Build the request URL and minimal parameters\n    base_url = f\"{API_BASE_URL}{resource_type}\"\n    params = {\n        \"q\": query,\n        \"api_key\": os.getenv(ENV_VAR_NAME),\n    }\n    \n    # Add additional parameters if any\n    for key, value in parameters.items():\n        params[key] = value\n        \n    # Make the request\n    with httpx.Client(timeout=timeout) as client:\n        response = client.get(base_url, params=params)\n    \n    if verbose:\n        print(f\"Request URL [redacted]: {_redact_request_url(response.url)}\")\n    \n    response.raise_for_status() \n    return response.json()\n```\n:::\n\n\n:::{.callout-note appearance=\"simple\" collapse=\"false\"}\nIn a proper application, we would want to handle the exceptions that may occur during the request (e.g. network errors, invalid API key, etc.), but for the sake of this exercise we will keep it simple and just raise any exceptions that occur.\n:::\n\nLet's test the function with a simple query:\n\n::: {#37800c81 .cell execution_count=4}\n``` {.python .cell-code}\nresponse = search_items(\n    \"artificial AND intelligence\",\n    page_size=5,\n    fields=\"sourceResource.title,sourceResource.description\",\n    facets=\"sourceResource.date.begin,sourceResource.date.end\",\n    verbose=True\n)\n\nprint(json.dumps(response, indent=2))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRequest URL [redacted]: https://api.dp.la/v2/items?q=artificial+AND+intelligence&page_size=5&fields=sourceResource.title%2CsourceResource.description&facets=sourceResource.date.begin%2CsourceResource.date.end\n{\n  \"count\": 3379,\n  \"docs\": [\n    {\n      \"sourceResource.title\": \"Artificial Intelligence\"\n    },\n    {\n      \"sourceResource.description\": [\n        \"\\\"January 1986.\\\"\",\n        \"Caption title.\"\n      ],\n      \"sourceResource.title\": \"Artificial intelligence\"\n    },\n    {\n      \"sourceResource.description\": [\n        \"In scope of the U.S. Government Publishing Office Cataloging and Indexing Program (C&I) and Federal Depository Library Program (FDLP).\",\n        \"Includes bibliographical references.\",\n        \"Online resource; title from PDF cover (USMC website, viewed July 18, 2024).\"\n      ],\n      \"sourceResource.title\": \"Artificial intelligence strategy\"\n    },\n    {\n      \"sourceResource.title\": \"Intelligence and the Computer - Artificial Intelligence\"\n    },\n    {\n      \"sourceResource.description\": \"Recording of the session titled \\\"Artificial intelligence and micros\\\" held at the fifth West Coast Computer Faire in San Francisco. The following papers were presented at this session: \\\"Microcomputers and the design of contelligent systems,\\\" presented by Dean Gengle. \\\"Artificial intelligence as applied to input and output in the office - or - making computers read and speak,\\\" presented by Art Derfall. \\\"Solving the Shooting Stars Puzzle,\\\" presented by Joel Shprentz.Additional Descriptive Notes: Saturday, 4:30\",\n      \"sourceResource.title\": \"Artificial intelligence and micros\"\n    }\n  ],\n  \"facets\": {\n    \"sourceResource.date.begin\": {\n      \"_type\": \"date_histogram\",\n      \"entries\": [\n        {\n          \"count\": 4,\n          \"time\": \"2026\"\n        },\n        {\n          \"count\": 128,\n          \"time\": \"2025\"\n        },\n        {\n          \"count\": 173,\n          \"time\": \"2024\"\n        },\n        {\n          \"count\": 100,\n          \"time\": \"2023\"\n        },\n        {\n          \"count\": 34,\n          \"time\": \"2022\"\n        },\n        {\n          \"count\": 34,\n          \"time\": \"2021\"\n        },\n        {\n          \"count\": 33,\n          \"time\": \"2020\"\n        },\n        {\n          \"count\": 23,\n          \"time\": \"2019\"\n        },\n        {\n          \"count\": 15,\n          \"time\": \"2018\"\n        },\n        {\n          \"count\": 3,\n          \"time\": \"2017\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"2016\"\n        },\n        {\n          \"count\": 6,\n          \"time\": \"2015\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"2014\"\n        },\n        {\n          \"count\": 26,\n          \"time\": \"2013\"\n        },\n        {\n          \"count\": 2,\n          \"time\": \"2012\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"2011\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"2010\"\n        },\n        {\n          \"count\": 6,\n          \"time\": \"2008\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"2007\"\n        },\n        {\n          \"count\": 31,\n          \"time\": \"2006\"\n        },\n        {\n          \"count\": 27,\n          \"time\": \"2005\"\n        },\n        {\n          \"count\": 71,\n          \"time\": \"2004\"\n        },\n        {\n          \"count\": 89,\n          \"time\": \"2003\"\n        },\n        {\n          \"count\": 67,\n          \"time\": \"2002\"\n        },\n        {\n          \"count\": 122,\n          \"time\": \"2001\"\n        },\n        {\n          \"count\": 327,\n          \"time\": \"2000\"\n        },\n        {\n          \"count\": 95,\n          \"time\": \"1999\"\n        },\n        {\n          \"count\": 171,\n          \"time\": \"1998\"\n        },\n        {\n          \"count\": 52,\n          \"time\": \"1997\"\n        },\n        {\n          \"count\": 97,\n          \"time\": \"1996\"\n        },\n        {\n          \"count\": 18,\n          \"time\": \"1995\"\n        },\n        {\n          \"count\": 22,\n          \"time\": \"1994\"\n        },\n        {\n          \"count\": 87,\n          \"time\": \"1993\"\n        },\n        {\n          \"count\": 17,\n          \"time\": \"1992\"\n        },\n        {\n          \"count\": 40,\n          \"time\": \"1991\"\n        },\n        {\n          \"count\": 8,\n          \"time\": \"1990\"\n        },\n        {\n          \"count\": 14,\n          \"time\": \"1989\"\n        },\n        {\n          \"count\": 9,\n          \"time\": \"1988\"\n        },\n        {\n          \"count\": 8,\n          \"time\": \"1987\"\n        },\n        {\n          \"count\": 30,\n          \"time\": \"1986\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"1985\"\n        },\n        {\n          \"count\": 12,\n          \"time\": \"1984\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"1983\"\n        },\n        {\n          \"count\": 13,\n          \"time\": \"1982\"\n        },\n        {\n          \"count\": 27,\n          \"time\": \"1981\"\n        },\n        {\n          \"count\": 33,\n          \"time\": \"1980\"\n        },\n        {\n          \"count\": 3,\n          \"time\": \"1979\"\n        },\n        {\n          \"count\": 5,\n          \"time\": \"1978\"\n        },\n        {\n          \"count\": 9,\n          \"time\": \"1977\"\n        },\n        {\n          \"count\": 7,\n          \"time\": \"1976\"\n        },\n        {\n          \"count\": 5,\n          \"time\": \"1975\"\n        },\n        {\n          \"count\": 10,\n          \"time\": \"1974\"\n        },\n        {\n          \"count\": 9,\n          \"time\": \"1973\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"1972\"\n        },\n        {\n          \"count\": 2,\n          \"time\": \"1971\"\n        },\n        {\n          \"count\": 19,\n          \"time\": \"1970\"\n        },\n        {\n          \"count\": 13,\n          \"time\": \"1969\"\n        },\n        {\n          \"count\": 16,\n          \"time\": \"1968\"\n        },\n        {\n          \"count\": 7,\n          \"time\": \"1967\"\n        },\n        {\n          \"count\": 30,\n          \"time\": \"1966\"\n        },\n        {\n          \"count\": 3,\n          \"time\": \"1965\"\n        },\n        {\n          \"count\": 25,\n          \"time\": \"1964\"\n        },\n        {\n          \"count\": 84,\n          \"time\": \"1963\"\n        },\n        {\n          \"count\": 62,\n          \"time\": \"1962\"\n        },\n        {\n          \"count\": 53,\n          \"time\": \"1961\"\n        },\n        {\n          \"count\": 10,\n          \"time\": \"1960\"\n        },\n        {\n          \"count\": 24,\n          \"time\": \"1959\"\n        },\n        {\n          \"count\": 13,\n          \"time\": \"1958\"\n        },\n        {\n          \"count\": 16,\n          \"time\": \"1957\"\n        },\n        {\n          \"count\": 17,\n          \"time\": \"1956\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"1955\"\n        },\n        {\n          \"count\": 16,\n          \"time\": \"1954\"\n        },\n        {\n          \"count\": 16,\n          \"time\": \"1952\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1951\"\n        },\n        {\n          \"count\": 13,\n          \"time\": \"1950\"\n        },\n        {\n          \"count\": 2,\n          \"time\": \"1949\"\n        },\n        {\n          \"count\": 2,\n          \"time\": \"1947\"\n        },\n        {\n          \"count\": 3,\n          \"time\": \"1946\"\n        },\n        {\n          \"count\": 6,\n          \"time\": \"1944\"\n        },\n        {\n          \"count\": 3,\n          \"time\": \"1942\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1938\"\n        },\n        {\n          \"count\": 2,\n          \"time\": \"1930\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1927\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1926\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"1925\"\n        },\n        {\n          \"count\": 12,\n          \"time\": \"1924\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"1923\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1914\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1885\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1871\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1844\"\n        }\n      ]\n    },\n    \"sourceResource.date.end\": {\n      \"_type\": \"date_histogram\",\n      \"entries\": [\n        {\n          \"count\": 4,\n          \"time\": \"2026\"\n        },\n        {\n          \"count\": 129,\n          \"time\": \"2025\"\n        },\n        {\n          \"count\": 173,\n          \"time\": \"2024\"\n        },\n        {\n          \"count\": 99,\n          \"time\": \"2023\"\n        },\n        {\n          \"count\": 34,\n          \"time\": \"2022\"\n        },\n        {\n          \"count\": 34,\n          \"time\": \"2021\"\n        },\n        {\n          \"count\": 33,\n          \"time\": \"2020\"\n        },\n        {\n          \"count\": 23,\n          \"time\": \"2019\"\n        },\n        {\n          \"count\": 15,\n          \"time\": \"2018\"\n        },\n        {\n          \"count\": 3,\n          \"time\": \"2017\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"2016\"\n        },\n        {\n          \"count\": 6,\n          \"time\": \"2015\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"2014\"\n        },\n        {\n          \"count\": 26,\n          \"time\": \"2013\"\n        },\n        {\n          \"count\": 2,\n          \"time\": \"2012\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"2011\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"2010\"\n        },\n        {\n          \"count\": 6,\n          \"time\": \"2008\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"2007\"\n        },\n        {\n          \"count\": 31,\n          \"time\": \"2006\"\n        },\n        {\n          \"count\": 27,\n          \"time\": \"2005\"\n        },\n        {\n          \"count\": 71,\n          \"time\": \"2004\"\n        },\n        {\n          \"count\": 89,\n          \"time\": \"2003\"\n        },\n        {\n          \"count\": 67,\n          \"time\": \"2002\"\n        },\n        {\n          \"count\": 122,\n          \"time\": \"2001\"\n        },\n        {\n          \"count\": 327,\n          \"time\": \"2000\"\n        },\n        {\n          \"count\": 95,\n          \"time\": \"1999\"\n        },\n        {\n          \"count\": 171,\n          \"time\": \"1998\"\n        },\n        {\n          \"count\": 52,\n          \"time\": \"1997\"\n        },\n        {\n          \"count\": 97,\n          \"time\": \"1996\"\n        },\n        {\n          \"count\": 18,\n          \"time\": \"1995\"\n        },\n        {\n          \"count\": 22,\n          \"time\": \"1994\"\n        },\n        {\n          \"count\": 87,\n          \"time\": \"1993\"\n        },\n        {\n          \"count\": 17,\n          \"time\": \"1992\"\n        },\n        {\n          \"count\": 40,\n          \"time\": \"1991\"\n        },\n        {\n          \"count\": 8,\n          \"time\": \"1990\"\n        },\n        {\n          \"count\": 14,\n          \"time\": \"1989\"\n        },\n        {\n          \"count\": 9,\n          \"time\": \"1988\"\n        },\n        {\n          \"count\": 8,\n          \"time\": \"1987\"\n        },\n        {\n          \"count\": 30,\n          \"time\": \"1986\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"1985\"\n        },\n        {\n          \"count\": 12,\n          \"time\": \"1984\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"1983\"\n        },\n        {\n          \"count\": 13,\n          \"time\": \"1982\"\n        },\n        {\n          \"count\": 28,\n          \"time\": \"1981\"\n        },\n        {\n          \"count\": 33,\n          \"time\": \"1980\"\n        },\n        {\n          \"count\": 3,\n          \"time\": \"1979\"\n        },\n        {\n          \"count\": 5,\n          \"time\": \"1978\"\n        },\n        {\n          \"count\": 9,\n          \"time\": \"1977\"\n        },\n        {\n          \"count\": 7,\n          \"time\": \"1976\"\n        },\n        {\n          \"count\": 5,\n          \"time\": \"1975\"\n        },\n        {\n          \"count\": 10,\n          \"time\": \"1974\"\n        },\n        {\n          \"count\": 9,\n          \"time\": \"1973\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"1972\"\n        },\n        {\n          \"count\": 2,\n          \"time\": \"1971\"\n        },\n        {\n          \"count\": 19,\n          \"time\": \"1970\"\n        },\n        {\n          \"count\": 13,\n          \"time\": \"1969\"\n        },\n        {\n          \"count\": 16,\n          \"time\": \"1968\"\n        },\n        {\n          \"count\": 7,\n          \"time\": \"1967\"\n        },\n        {\n          \"count\": 30,\n          \"time\": \"1966\"\n        },\n        {\n          \"count\": 3,\n          \"time\": \"1965\"\n        },\n        {\n          \"count\": 25,\n          \"time\": \"1964\"\n        },\n        {\n          \"count\": 84,\n          \"time\": \"1963\"\n        },\n        {\n          \"count\": 62,\n          \"time\": \"1962\"\n        },\n        {\n          \"count\": 53,\n          \"time\": \"1961\"\n        },\n        {\n          \"count\": 10,\n          \"time\": \"1960\"\n        },\n        {\n          \"count\": 24,\n          \"time\": \"1959\"\n        },\n        {\n          \"count\": 13,\n          \"time\": \"1958\"\n        },\n        {\n          \"count\": 16,\n          \"time\": \"1957\"\n        },\n        {\n          \"count\": 17,\n          \"time\": \"1956\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"1955\"\n        },\n        {\n          \"count\": 16,\n          \"time\": \"1954\"\n        },\n        {\n          \"count\": 16,\n          \"time\": \"1952\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1951\"\n        },\n        {\n          \"count\": 13,\n          \"time\": \"1950\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1949\"\n        },\n        {\n          \"count\": 2,\n          \"time\": \"1947\"\n        },\n        {\n          \"count\": 3,\n          \"time\": \"1946\"\n        },\n        {\n          \"count\": 6,\n          \"time\": \"1944\"\n        },\n        {\n          \"count\": 3,\n          \"time\": \"1942\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1938\"\n        },\n        {\n          \"count\": 2,\n          \"time\": \"1930\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1927\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1926\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"1925\"\n        },\n        {\n          \"count\": 12,\n          \"time\": \"1924\"\n        },\n        {\n          \"count\": 4,\n          \"time\": \"1923\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1914\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1885\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1871\"\n        },\n        {\n          \"count\": 1,\n          \"time\": \"1844\"\n        }\n      ]\n    }\n  },\n  \"limit\": 5,\n  \"start\": 1\n}\n```\n:::\n:::\n\n\nHooray ðŸŽ‰! weâ€™ve successfully queried the DPLA API and got a well-formatted response. However, this function only returns a single page of results. The maximum number of results per page is 100, so if we want more than one page, we need to handle pagination.\n\nOur second function, `search_all_items`, takes almost the same parameters as `search_items`, but it fetches multiple pages and returns a single list of items (up to a maximum you set).\n\nSome specific parameters for this function will allow us to control the maximum number of items to fetch (`max_items`), the sleep time between requests to avoid hitting rate limits (`sleep`), and the timeout for the HTTP requests (`timeout`).\n\n::: {#4e570fb0 .cell execution_count=5}\n``` {.python .cell-code}\ndef search_all_items(query, resource_type='items', max_items=100, sleep=0.5, verbose=False, timeout=30.0, **parameters):\n    \"\"\"\n    Collect up to max_items across pages.\n    \n    Args:\n        query (str): The search query string. It's possible to use logical operators \n            (AND, OR, NOT). Additionally, you can use wildcards (*) for partial matches.\n        max_items (int): Maximum number of items to retrieve. For number of elements per page, \n            use the page_size parameter in **parameters.\n        sleep (float): Time to wait between requests to avoid hitting rate limits.\n        **parameters: Facets and filter parameters from the DPLA API documentation: https://pro.dp.la/developers/requests\n    \"\"\"\n    all_docs = []\n    page = 1\n    page_size = int(parameters.get(\"page_size\", 100))\n    if page_size > 100:\n        page_size = 100\n        print(\"page_size cannot exceed 100. Setting to 100.\")\n        \n    while len(all_docs) < max_items:\n        parameters['page'] = page\n        data = search_items(\n            query,\n            resource_type=resource_type,\n            verbose=verbose,\n            timeout=timeout,\n            **parameters\n        )\n        docs = data.get('docs', [])\n        if not docs:\n            break  # No more results\n        all_docs.extend(docs)\n        \n        # stop if we've reached max_items\n        if len(all_docs) >= max_items:\n            break\n        \n        page += 1\n        time.sleep(sleep)\n        \n    return all_docs[:max_items]\n```\n:::\n\n\nAgain, this function can be improved with proper error handling and a better pagination logic, but we want to keep it simple for now. \n\nSame as with the previous function, we can test it with a simple query:\n\n::: {#8a75647e .cell execution_count=6}\n``` {.python .cell-code}\nresults = search_all_items(\n    \"artificial AND intelligence\",\n    page_size=50,\n    max_items=150,\n    fields=\"sourceResource.title,sourceResource.description\",\n    facets=\"sourceResource.date.begin,sourceResource.date.end\",\n)\n\nprint(f\"Total items retrieved: {len(results)}\")\nprint(json.dumps(results[-5:], indent=2))  # Print the last 5 results\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTotal items retrieved: 150\n[\n  {\n    \"sourceResource.description\": [\n      \"\\\"May 2023.\\\"\",\n      \"Includes bibliographical references (pages 40-47).\",\n      \"\\\"A report by the Select Committee on Artificial Intelligence of the National Science and Technology Council.\\\"\",\n      \"Description based on online resource; title from PDF cover (White House, viewed Nov. 7, 2023).\"\n    ],\n    \"sourceResource.title\": \"The national artificial intelligence research and development strategic plan: 2023 update\"\n  },\n  {\n    \"sourceResource.description\": [\n      \"Updated irregularly\",\n      \"The CRS web page provides access to all versions published since 2018 in accordance with P.L. 115-141.\",\n      \"In scope of the U.S. Government Publishing Office Cataloging and Indexing Program (C&I) and Federal Depository Library Program (FDLP).\",\n      \"Report includes bibliographical references.\",\n      \"Contents viewed on December 7, 2023; title from CRS web page.\"\n    ],\n    \"sourceResource.title\": \"Artificial intelligence : overview, recent advances, and considerations for the 118th Congress\"\n  },\n  {\n    \"sourceResource.description\": \"Bibliography: leaves [107]-[108]\",\n    \"sourceResource.title\": \"The meaning and mechanics of intelligence\"\n  },\n  {\n    \"sourceResource.description\": [\n      \"Updated irregularly\",\n      \"Batch processed record.\",\n      \"This record provides access to the versions of this bill or resolution published in the United States Government Publishing Office's (GPO) GovInfo system. To see the versions, use the GPO PURL. To see the actions related to this bill or resolution, use the Congress.gov URL.\",\n      \"At head of title: 118th Congress, 2d session.\",\n      \"Sponsor(s): Representative Lisa Blunt Rochester.\",\n      \"Cosponsor(s): Representative Marcus J. Molinaro.\",\n      \"Referred committee(s): House Committee on Energy and Commerce.\",\n      \"Date of introduction: \\\"September 19, 2024.\\\"\",\n      \"United States Congress chamber(s): United States House of Representatives.\",\n      \"United States federal government branch: Legislative branch.\",\n      \"Access ID (GovInfo): BILLS-118hr9673ih.\",\n      \"Pagination at time of introduction: 16 pages.\",\n      \"In scope of the U.S. Government Publishing Office Cataloging and Indexing Program (C&I) and Federal Depository Library Program (FDLP).\",\n      \"GovInfo.gov metadata; title from caption of the introduced version (GovInfo, September 19, 2024).\"\n    ],\n    \"sourceResource.title\": \"To Direct the Secretary of Commerce to Develop a National Strategy Regarding Artificial Intelligence Consumer Literacy and Conduct a National Artificial Intelligence Consumer Literacy Campaign\"\n  },\n  {\n    \"sourceResource.description\": \"Deep learning has rapidly emerged as a transformative technology that permeates all modern software, from autonomous driving systems to medical-diagnosis and malware-detection tools. Considering the critical role of this software in our technologies, it must behave as intended. The complexity introduced by deep-learning components complicates formal reasoning about the behavior of such software, frequently resulting in solutions that offer only empirical or no guarantees.This thesis contributes techniques and algorithms that increase the robustness of deep-learning-powered software by providing strong provable guarantees across the components existing in the entire deep learning pipeline. By leveraging the power of abstract interpretation, a well-established theory for program analysis and verification, this thesis enables the verification of robustness properties across the deep learning pipeline. The thesis focuses on four critical aspects of robustness: (1) preventing numerical bugs\",\n    \"sourceResource.title\": \"Towards Robust Artificial-Intelligence-Powered Software: Provable Guarantees via Abstract Interpretation\"\n  }\n]\n```\n:::\n:::\n\n\nGreat! We have successfully retrieved multiple pages of results from the DPLA API, and we can control the number of items we want to fetch with the `max_items` parameter. Now we are ready to do some queries and explore the data!\n\n",
    "supporting": [
      "python-functions_files"
    ],
    "filters": [],
    "includes": {}
  }
}